//=======
//Globals
Texture2D shader_texture;
SamplerState sample_type;

cbuffer MOTION_BLUR
{
    float mouse_x;
    float mouse_y;
    float2 padding;
};

//========
//TypeDefs
struct PIXEL_INPUT_TYPE
{
    float4 position : SV_POSITION;
    float2 tex : TEXCOORD0;
};

//===========
//PixelShader
float4 Texture_pixel_shader(PIXEL_INPUT_TYPE input) : SV_TARGET
{
    float4 texture_color;
    float4 texture_color_temp;
    float2 motion_coord = float2(input.tex.x + mouse_x, input.tex.y + mouse_y);
    float2 motion_coord_temp;
    float delta_x = -mouse_x / 20.0f;
    float delta_y = -mouse_y / 20.0f;    

    for (int i = -20; i < 20; i++)
    {
        motion_coord_temp.x = motion_coord.x + i * delta_x;
        motion_coord_temp.y = motion_coord.y + i * delta_y;
        texture_color_temp += shader_texture.Sample(sample_type, motion_coord_temp);
    }

    texture_color_temp /= 40;
    texture_color = (1 - 0.68033f) * shader_texture.Sample(sample_type, input.tex) + 0.68033f * texture_color_temp;

    return texture_color;
};

